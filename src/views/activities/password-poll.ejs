<div id="password-poll-container">
    <h2 id="question-text">LOADING_QUESTION...</h2>
    
    <div class="poll-options">
        <button class="cyber-button" onclick="submitAns('yes')">>> YES</button>
        <button class="cyber-button" onclick="submitAns('no')">>> NO</button>
    </div>
    
    <div id="status-message" style="margin-top:20px; display:none;">
        RESPONSE_LOGGED. STANDBY.
    </div>
</div>

<script>
    // This script runs in the context of the activity page
    // The main activity.ejs will load this content dynamically or we render it directly.
    // For now, let's assume this is the content of the "activity-content" div.

    let currentStep = <%= step %>; // Server should pass current step
    const questions = [
        "DO YOU USE THE SAME PASSWORD FOR MORE THAN ONE ACCOUNT?",
        "DOES ANY OF YOUR PASSWORDS CONTAIN YOUR NAME OR BIRTHDAY?",
        "HAVE YOU CHANGED ANY OF YOUR PASSWORDS IN THE LAST 6 MONTHS?"
    ];

    document.getElementById('question-text').innerText = questions[currentStep] || "AWAITING_INSTRUCTIONS";

    async function submitAns(answer) {
        try {
            const response = await fetch('/activity/password-poll/respond', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ step: currentStep, answer: answer })
            });
            
            if (response.ok) {
                document.querySelector('.poll-options').style.display = 'none';
                document.getElementById('status-message').style.display = 'block';
            }
        } catch (e) {
            console.error(e);
            alert("TRANSMISSION_ERROR");
        }
    }
</script>

<style>
    .cyber-button {
        display: block;
        width: 100%;
        margin: 10px 0;
        padding: 20px;
        font-size: 1.2rem;
        background: black;
        color: white;
        border: 2px solid white;
    }
    .cyber-button:hover {
        background: white;
        color: black;
    }
</style>
