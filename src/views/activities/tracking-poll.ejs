<div id="tracking-container">
    <h2>>> PRIVACY_ALERT</h2>
    <p>SCENARIO: YOU FOUND AN APP TRACKING YOUR LOCATION WITHOUT PERMISSION.</p>
    <p>ACTION_REQUIRED:</p>
    
    <div class="poll-options">
        <label class="cyber-radio-card">
            <input type="radio" name="tracking_option" value="delete" onclick="enableSubmit()">
            <span class="label-text">DELETE_APP_IMMEDIATELY</span>
        </label>
        
        <label class="cyber-radio-card">
            <input type="radio" name="tracking_option" value="settings" onclick="enableSubmit()">
            <span class="label-text">REVOKE_PERMISSION_IN_SETTINGS</span>
        </label>
        
        <label class="cyber-radio-card">
            <input type="radio" name="tracking_option" value="ignore" onclick="enableSubmit()">
            <span class="label-text">IGNORE_IT (NORMAL_BEHAVIOR)</span>
        </label>
        
        <label class="cyber-radio-card">
            <input type="radio" name="tracking_option" value="report" onclick="enableSubmit()">
            <span class="label-text">REPORT_TO_APP_STORE</span>
        </label>
    </div>

    <button id="submit-tracking" class="cyber-button action-btn" onclick="submitTracking()" disabled>>> EXECUTE_DECISION</button>
    
    <div id="tracking-status" style="margin-top:20px; display:none;">
        DECISION_LOGGED. AWAITING_ANALYSIS.
    </div>
</div>

<script>
    function enableSubmit() {
        document.getElementById('submit-tracking').disabled = false;
        document.getElementById('submit-tracking').style.opacity = '1';
    }

    async function submitTracking() {
        const selected = document.querySelector('input[name="tracking_option"]:checked');
        if (!selected) return;
        
        try {
            const response = await fetch('/activity/tracking-poll/respond', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ option: selected.value })
            });
            
            if (response.ok) {
                document.getElementById('tracking-container').innerHTML = document.getElementById('tracking-status').innerHTML;
                document.getElementById('tracking-status').style.display = 'block';
            }
        } catch (e) {
            console.error(e);
            alert("TRANSMISSION_ERROR");
        }
    }
</script>

<style>
    .cyber-radio-card {
        display: block;
        border: 1px solid black;
        padding: 15px;
        margin-bottom: 10px;
        cursor: pointer;
        transition: background 0.2s;
    }
    .cyber-radio-card:hover {
        background: #f0f0f0;
    }
    .cyber-radio-card input {
        width: auto;
        margin-right: 10px;
    }
    .label-text {
        font-weight: bold;
    }
</style>
